/**
*
*   FnList
*   Efficient (functional) methods for processing lists/sets/vectors/strings or arbitrary range of numbers
*   @version: 1.0.0
*   https://github.com/foo123/FnList.js
**/
!function(n,r,t){"use strict";"undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils["import"]?(n.$deps=n.$deps||{})&&(n.EXPORTED_SYMBOLS=[r])&&(n[r]=n.$deps[r]=t.call(n)):"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[r]=t.call(n)):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(r,[],function(e){e(r,t.call(n))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(r)?define(r,["module"],function(r){return t.moduleUri=r.uri,t.call(n)}):r in n||(n[r]=t.call(n)||1)&&"function"==typeof define&&define.amd&&define(function(){return n[r]})}(this,"FnList",function(n){"use strict";function r(n){return n instanceof Array||"[object Array]"===_.call(n)}function t(n){return n instanceof String||"[object String]"===_.call(n)}function e(n,r){return $.round((r-n)*$.random()+n)}function u(n,r){return n+r}function l(n,r){return n*r}function f(n,r,t,e){return e=n[r],n[r]=n[t],n[t]=e,n}function i(n,r,t,e,u,l,f){var i=this;i.key=n,i.val=r,i.prev=t||null,i.next=e||null,i.left=u||null,i.right=l||null,i.data=f||null}function o(n,t,e,u,l,f,i){var o,c,a,s,h,g,p,v,d=t,y=null,m=e&&r(e);if(m&&(null==u&&(u=0),null==l&&(l=e.length-1)),null==f&&(f=u>l?-1:1),0===f||m&&!e.length||0>=$.floor((l-u)/f)+1)return d;if(0>f?(v=(u-l)%-f,v&&(y=l),l+=v,g=l,p=u,s=-1,a=-(-f<<4)):(v=(l-u)%f,v&&(y=l),l-=v,g=u,p=l,s=1,a=f<<4),h=u+f*(15&$.floor((l-u)/f+1)),m){for(g=$.max(0,g),p=$.min(e.length-1,p),o=u;o>=g&&p>=o&&s*(h-o)>0;o+=f)d=n(d,e[o],o);for(c=h;c>=g&&p>=c;c+=a)o=c,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o),o+=f,d=n(d,e[o],o);!0===i&&null!==y&&y>=0&&y<e.length&&(d=n(d,e[y],y))}else{for(o=u;o>=g&&p>=o&&s*(h-o)>0;o+=f)d=n(d,o,o);for(c=h;c>=g&&p>=c;c+=a)o=c,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o),o+=f,d=n(d,o,o);!0===i&&null!==y&&(d=n(d,y,y))}return d}function c(n,t,e){var u=r(n)?n:(n=0|n)>0?new Array(n):[];if(n=u.length,n>0&&null!=t){e=e||0;var l=t;o("function"==typeof t?function(n,r,e){return n[e]=t(e),n}:t===+t?function(n,r,t){return n[t]=l,l+=e,n}:function(n,r,e){return n[e]=t,n},u,u)}return u}function a(n,r,t,e){return o(u,0,n,r,t,e)}function s(n,r,t,e){return o(l,1,n,r,t,e)}function h(n,r,t){return o(function(n,r,e){return n[e]=r[t],n},n,r)}function g(n,r,t,e){if(null==t&&(t=0),null==e&&(e=r.length-1),e>t)for(var u,l=t,f=e;f>l;l++,f--)u=r[l],n[l]=r[f],n[f]=u;return n}function p(n,r,t,e){var u,l,i,c,a,s=n.length,h=-1;for(null==t&&(t=0),null==e&&(e=s-1),u=e-t+1,0>r&&(r=-r,h=-h),l=t;r>0&&u>r;)i=l+u-r,c=r,r+r>u&&(i=l+r,c=u-r),o(function(n,r){return f(n,l+r,i+r)},n,null,0,c-1,1),s>=r+r?u-=r:(l+=u-r,a=r,r=r+r-u,u=a);return n}function v(n,t,e,u,l){var f=0;return o(r(e)?function(n,r,t){return n[t]=e[t]>0?(r+f)%e[t]:0,f+=e[t]-n[t],n}:function(n,r,t){return n[t]=(r+f)%e,f+=e-n[t],n},n,t,u,l)}function d(n,r,t,e,u,l,f){return null==e&&(e=1),null==u&&(u=0),o(2===t?function(n,r,t){return n[t]=u+e*(1&r),n}:function(n,r,l){return n[l]=u+e*(r%t),n},n,r,l,f)}function y(n,r,t,e,u,l){return null==t&&null==e?n:o(function(n,r,u){return n[u]=e+t*r,n},n,r,u,l)}function m(n,r,t,e,u,l,f,i){if(null==r)return null;null==t&&(t=1),null==e&&(e=0),null==u&&(u=0),null==l&&(l=r.length-1),null==f&&(f=u),null==i&&(i=l);var c=0,a=f>i?-1:1,s=f;return o(function(n,r,u){return r=e+t*r,n[s]=r-c,c=r,s+=a,n},n,r,u,l)}function E(n,r,t,e,u,l,f,i){if(null==r)return null;null==t&&(t=1),null==e&&(e=0),null==u&&(u=0),null==l&&(l=r.length-1),null==f&&(f=u),null==i&&(i=l);var c=0,a=f>i?-1:1,s=f;return o(function(n,r,u){return c+=r,n[s]=e+t*c,s+=a,n},n,r,u,l)}function T(){var n,t,e,u,l,f,i,o,c,a,s=arguments,h=s.length;if(!h)return[];if(!0===s[0]){for(c=s[1].length,n=2;h>n;n++)c*=s[n].length;for(a=new Array(c),n=0;c>n;n++){for(o=0,f=1,e=n,t=1;h>t;t++)u=s[t].length,l=e%u,e=~~(e/u),i=s[t][l],o+=f*i,f*=u;a[n]=o}}else{for(c=s[0].length,n=1;h>n;n++)c*=s[n].length;for(a=new Array(c),n=0;c>n;n++){for(o=[],e=n,t=h-1;t>=0;t--)if(u=s[t].length,l=e%u,e=~~(e/u),i=s[t][l],r(i))for(f=i.length-1;f>=0;f--)o.unshift(i[f]);else o.unshift(i);a[n]=o}}return a}function w(n,r,t,e,u,l,f,i){e=-1===e?-1:1,null==u&&(u=0),null==l&&(l=r.length-1),null==f&&(f=0),null==i&&(i=t.length-1);var o=u>l?-1:1,c=f>i?-1:1,a=o*(l-u)+1,s=c*(i-f)+1,h=u,g=f,p=0;if(null==n&&(n=new Array($.min(a,s))),0===n.length)return n;for(;o*(l-h)>=0&&c*(i-g)>=0;)1===e&&r[h]<t[g]||-1===e&&r[h]>t[g]?h+=o:1===e&&r[h]>t[g]||-1===e&&r[h]<t[g]?g+=c:(n[p++]=r[h],h+=o,g+=c);return p<n.length&&(n.length=p),n}function b(n,r,t,e,u,l,f,i){e=-1===e?-1:1,null==u&&(u=0),null==l&&(l=r===+r?r-1:r.length-1),null==f&&(f=0),null==i&&(i=t?t.length-1:-1);var o=u>l?-1:1,a=f>i?-1:1,s=o*(l-u)+1,h=u,g=u,p=0;if(!t||!t.length)return r===+r?c(r,u,o):r?r.slice():r;if(null==n&&(n=new Array(s)),r===+r){for(;o*(l-h)>=0&&a*(i-g)>=0;)h===t[g]?(h+=o,g+=o):1===e&&h>t[g]||-1===e&&h<t[g]?g+=a:(n[p++]=h,h+=o);for(;o*(l-h)>=0;)n[p++]=h,h+=o}else{for(;o*(l-h)>=0&&a*(i-g)>=0;)r[h]===t[g]?(h+=o,g+=o):1===e&&r[h]>t[g]||-1===e&&r[h]<t[g]?g+=a:(n[p++]=r[h],h+=o);for(;o*(l-h)>=0;)n[p++]=r[h],h+=o}return p<n.length&&(n.length=p),n}function x(n,r,t,e,u,l,f,i,o,c,a){e=-1===e?-1:1,null==u&&(u=0),null==l&&(l=r.length-1),null==f&&(f=0),null==i&&(i=t.length-1),!0===o?c=!1:(o=!1,c=!1!==c),a=!0===a;var s=u>l?-1:1,h=f>i?-1:1,g=s*(l-u)+1,p=h*(i-f)+1,v=g+p,d=u,y=f,m=0,E=null,T=!c;if(null==n&&(n=new Array(v)),0===n.length)return a?r:n;for(;s*(l-d)>=0&&h*(i-y)>=0;){if(c&&m){if(r[d]===E){d+=s;continue}if(t[y]===E){y+=h;continue}}o?1===e&&r[d][0]<t[y][0]||-1===e&&r[d][0]>t[y][0]?(n[m++]=E=r[d],d+=s):1===e&&r[d][0]>t[y][0]||-1===e&&r[d][0]<t[y][0]?(n[m++]=E=t[y],y+=h):(1===e&&r[d][1]<t[y][1]||-1===e&&r[d][1]>t[y][1]?(n[m++]=E=r[d],T&&(n[m++]=t[y])):(n[m++]=E=t[y],T&&(n[m++]=r[d])),d+=s,y+=h):1===e&&r[d]<t[y]||-1===e&&r[d]>t[y]?(n[m++]=E=r[d],d+=s):1===e&&r[d]>t[y]||-1===e&&r[d]<t[y]?(n[m++]=E=t[y],y+=h):(n[m++]=E=r[d],T&&(n[m++]=t[y]),d+=s,y+=h)}for(;s*(l-d)>=0;)(T||r[d]!==E)&&(n[m++]=E=r[d],d+=s);for(;h*(i-y)>=0;)(T||t[y]!==E)&&(n[m++]=E=t[y],y+=h);if(a){for(d=0>s?l:u,m=0;v>m;m++,d++)r[d]=n[m];return r}return m<n.length&&(n.length=m),n}function A(n,r,t,e){var u,l,f,i,o=n.length;for(null==t&&(t=0),null==e&&(e=o-1),u=n[r],i=n[r],n[r]=n[e],n[e]=i,l=t,f=t;e>f;f++)n[f]<=u&&(i=n[f],n[f]=n[l],n[l]=i,l++);return i=n[l],n[l]=n[e],n[e]=i,l}function N(n,r,t,e,u){var l,f,i,o,c,a,s,h,g;for(e[0]=-1,e[1]=-1,e[2]=0,e[3]=-1,e[4]=-1,e[5]=0,a=0,g=0,o=r,c=-1,l=u?n[o][0]:n[o],i=o+1;t>=i;i++){if(f=u?n[i][0]:n[i],f>l){if(-1===a){c=i-1;break}0===a&&(a=1)}else if(l>f){if(1===a){c=i-1;break}0===a&&(a=-1)}l=f}if(0===a&&(a=1),-1===c)c=t,e[0]=o,e[1]=c,e[2]=a;else{for(s=c+1,h=-1,l=u?n[s][0]:n[s],i=s+1;t>=i;i++){if(f=u?n[i][0]:n[i],f>l){if(-1===g){h=i-1;break}0===g&&(g=1)}else if(l>f){if(1===g){h=i-1;break}0===g&&(g=-1)}l=f}-1===h&&(h=t),0===g&&(g=1),e[0]=o,e[1]=c,e[2]=a,e[3]=s,e[4]=h,e[5]=g}}function R(n,r,t,e,u){if(null==e&&(e=0),null==u&&(u=n.length-1),t=!0===t,e>=u)return t?e===u?[e]:[]:n;var l,f,i,c,a=u-e+1,s=new Array(a),p=[-1,-1,0,-1,-1,0];t&&(n=o(function(n,r,t){return n[t-e]=[r,t],n},new Array(a),n,e,u,1),e=0,u=a-1),i=e,c=-1,r=-1===r?-1:1;do N(n,e,u,p,t),-1===p[3]?(r!==p[2]&&u>e&&g(n,n,e,u),l=e,f=u):(p[2]*=r,p[5]*=r,x(s,n,n,r,0>p[2]?p[1]:p[0],0>p[2]?p[0]:p[1],0>p[5]?p[4]:p[3],0>p[5]?p[3]:p[4],t,!1,!0),l=p[0],f=p[4]),-1!==c&&x(s,n,n,r,i,c,l,f,t,!1,!0),c=f,e=f+1;while(u>=e);return t?h(n,n,1):n}function j(n,r,t,e){var u,l,f=n[r][0],i=t;for(l=n[r],n[r]=n[e],n[e]=l,u=t;e>u;u++)n[u][0]<=f&&(l=n[u],n[u]=n[i],n[i]=l,i++);return l=n[i],n[i]=n[e],n[e]=l,i}function O(n,r,t,e){if(null==t&&(t=0),null==e&&(e=n.length-1),t>=e)return n;var u,l,f,i,o=e-t+1,c=new Array(o),a=[-1,-1,0,-1,-1,0];f=t,i=-1,r=-1===r?-1:1;do N(n,t,e,a,!0),-1===a[3]?(r!==a[2]&&e>t&&g(n,n,t,e),u=t,l=e):(a[2]*=r,a[5]*=r,x(c,n,n,r,0>a[2]?a[1]:a[0],0>a[2]?a[0]:a[1],0>a[5]?a[4]:a[3],0>a[5]?a[3]:a[4],!0,!1,!0),u=a[0],l=a[4]),-1!==i&&x(c,n,n,r,f,i,u,l,!0,!1,!0),i=l,t=l+1;while(e>=t);return n}function I(n,r,t,e){var u,l,f,i=n.length;if(null==t&&(t=0),null==e&&(e=i-1),null==r||0===r){for(r=0,l=n[t],u=t+1;e>=u;u++){if(f=n[u],f>l){if(-1===r)return 0;0===r&&(r=1)}else if(l>f){if(1===r)return 0;0===r&&(r=-1)}l=f}return 0===r?1:r}if(r=-1===r?-1:1,t>=e)return r;if(-1===r)for(l=n[t],u=t+1;e>=u;u++){if(f=n[u],f>l)return 0;l=f}else for(l=n[t],u=t+1;e>=u;u++){if(f=n[u],l>f)return 0;l=f}return r}function k(n,r,t,e){for(var u=n[r],l=n[r],f=r,i=r,o=r+1;t>=o;o++)n[o]<u&&(u=n[o],f=o),n[o]>l&&(l=n[o],i=o);return e?[f,i]:[u,l]}function S(n,r,t,e,u,l){var f=e-t+1;return 0>u&&(r=f-1-r),l?t+r:n[t+r]}function F(n,r,t,e,u,l){if(l)return O(l,1,t,e),u?l[t+r][1]:l[t+r][0];var f=R(n,1,!0,t,e);return u?f[r]:n[f[r]]}function D(n,r,t,e,u,l,f,i){var o,a,s,h,g,p,v,d=e-t+1;if(1>=d)return u?t:n[t];if(null==l&&(l=c(d,function(r){return[n[t+r],t+r]})),5>=d)return F(l,r,0,d-1,u,l);for(a=d%5,o=$.ceil(d/5),null==f&&(f=new Array(o),i=new Array(o)),s=0,a>0&&(g=F(l,a>>>1,0,a-1,1,l),f[s]=l[g][0],i[s]=[f[s],s,g],s++),h=a;d>h;h+=5)g=F(l,2,h,h+4,1,l),f[s]=l[g][0],i[s]=[f[s],s,g],s++;return p=1===o?0:D(f,o>>>1,0,o-1,1,i),v=j(l,i[p][2],0,d-1),v>r?D(n,r,0,v-1,u,l,f,i):r>v?D(n,r,v+1,d-1,u,l,f,i):u?l[v][1]:l[v][0]}function L(n,r,t,e,u){var l,f,i,o=n.length;return null==e&&(e=0),null==u&&(u=o-1),l=u-e+1,r=$.max(0,$.min(r,l-1)),0===r||l-1===r?(f=k(n,e,u,t),0===r?f[0]:f[1]):(i=I(n,0,e,u))?S(n,r,e,u,i,t):5>=l?F(n,r,e,u,t):D(n,r,e,u,t)}function P(n,t,e){var u,l=H.rndInt;return r(t)?1<(u=t.length)&&o(function(n){if(0<u--){var r=l(0,u),e=n[t[u]];n[t[u]]=n[t[r]],n[t[r]]=e}return n},n,t,0,u-1):(null==t&&(t=0),null==e&&(e=n.length-1),1<(u=e-t+1)&&o(function(n){if(0<u--){var r=l(0,u),e=n[t+u];n[t+u]=n[t+r],n[t+r]=e}return n},n,n,0,u-1)),n}function V(n,r,t,e,u,l,f){null==l&&(l=0),null==f&&(f=n.length-1);var i,o,c,a,s=H.rndInt,h=f-l+1;if(r=$.min(r,h),t=!0===t,i=new Array(r),!0===e){for(h-=1,o=0;r>o;o++)i[o]=n[l+s(0,h)];return t&&R(i),i}for(o=0;r>o;o++)c=s(0,--h),a=n[l+c],n[l+c]=n[l+h],n[l+h]=a,i[o]=a,u&&(u[o]=c);if(u)for(o=r-1;o>=0;o--)c=u[o],a=n[l+h],n[l+h]=n[l+c],n[l+c]=a,h++;return t&&R(i),i}function X(n,r,t,e,u){t=-1===t?-1:1,null==e&&(e=0),null==u&&(u=r.length-1);var l,f,i=e,o=u;if(n===r[i])return i;if(n===r[o])return o;for(;o>i;){if(l=i+(o-i+1>>>1),f=r[l],n===f)return l;1===t&&f>n||-1===t&&n>f?o=l-1:i=l+1}return-1}function G(){var n,r,t,e,u,l,f,i,o,c,a,s,h,g,p,v=arguments,d=v.length,y="|^",m="|v";if(d){for(f=1,p=[],l=[],s=[],a=[],n=d-1;n>=0;n--)c=v[n],a.unshift("f"+n),c.push?(s.unshift(c[1]),c=c[0]):s.unshift(null),g=c.slice(-2),m===g?(h=!0,c=c.slice(0,-2)):y===g?(h=!1,c=c.slice(0,-2)):h=!1,c=c.length?'["'+c.split(".").join('"]["')+'"]':"",r="a"+c,t="b"+c,s[0]&&(r=a[0]+"("+r+")",t=a[0]+"("+t+")"),e="a_"+n,u="b_"+n,l.unshift(""+e+"="+r+","+u+"="+t),i=h?""+f:"-"+f,o=h?"-"+f:""+f,p.unshift("("+e+" < "+u+" ? "+i+" : ("+e+" > "+u+" ? "+o+" : 0))"),f<<=1;return new Function(a.join(","),["return function(a,b) {","  var "+l.join(",")+";","  return "+p.join("+")+";","};"].join("\n")).apply(null,s)}return r="a",t="b",i="-1",o="1",p=""+r+" < "+t+" ? "+i+" : ("+r+" > "+t+" ? "+o+" : 0)",new Function("a,b","return "+p+";")}var H,$=Math,_=(Object.prototype.hasOwnProperty,Object.prototype.toString);return i.NODE=1,i.PREV=2,i.NEXT=4,i.LEFT=8,i.RIGHT=16,i.walk=function C(n,r,t){r&&(i.NODE===n[0]?t(r):i.PREV===n[0]&&r.prev?C(n,r.prev,t):i.LEFT===n[0]&&r.left?C(n,r.left,t):i.RIGHT===n[0]&&r.right?C(n,r.right,t):i.NEXT===n[0]&&r.next&&C(n,r.next,t),i.NODE===n[1]?t(r):i.PREV===n[1]&&r.prev?C(n,r.prev,t):i.LEFT===n[1]&&r.left?C(n,r.left,t):i.RIGHT===n[1]&&r.right?C(n,r.right,t):i.NEXT===n[1]&&r.next&&C(n,r.next,t),i.NODE===n[2]?t(r):i.PREV===n[2]&&r.prev?C(n,r.prev,t):i.LEFT===n[2]&&r.left?C(n,r.left,t):i.RIGHT===n[2]&&r.right?C(n,r.right,t):i.NEXT===n[2]&&r.next&&C(n,r.next,t),i.NODE===n[3]?t(r):i.PREV===n[3]&&r.prev?C(n,r.prev,t):i.LEFT===n[3]&&r.left?C(n,r.left,t):i.RIGHT===n[3]&&r.right?C(n,r.right,t):i.NEXT===n[3]&&r.next&&C(n,r.next,t),i.NODE===n[4]?t(r):i.PREV===n[4]&&r.prev?C(n,r.prev,t):i.LEFT===n[4]&&r.left?C(n,r.left,t):i.RIGHT===n[4]&&r.right?C(n,r.right,t):i.NEXT===n[4]&&r.next&&C(n,r.next,t))},H={VERSION:"1.0.0",is_string:t,is_array:r,array:c,operate:o,sum:a,product:s,gray:v,affine:y,modulo:d,finitedifference:m,partialsum:E,reflect:g,rotate:p,kronecker:T,intersection:w,difference:b,union:x,partition:A,search:X,sort:R,is_sorted:I,select:L,sorter:G,shuffle:P,pick:V,pluck:h,rndInt:e,Node:i}});