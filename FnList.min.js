/**
*
*   FnList
*   Efficient (functional) methods for processing lists/sets/vectors/strings or arbitrary range of numbers
*   @version: 1.0.0
*   https://github.com/foo123/FnList.js
**/
!function(n,t,r){"use strict";"undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils["import"]?(n.$deps=n.$deps||{})&&(n.EXPORTED_SYMBOLS=[t])&&(n[t]=n.$deps[t]=r.call(n)):"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=r.call(n)):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(e){e(t,r.call(n))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return r.moduleUri=t.uri,r.call(n)}):t in n||(n[t]=r.call(n)||1)&&"function"==typeof define&&define.amd&&define(function(){return n[t]})}(this,"FnList",function(n){"use strict";function t(n){return n instanceof Array||"[object Array]"===I.call(n)}function r(n){return n instanceof String||"[object String]"===I.call(n)}function e(n,t){return A.round((t-n)*A.random()+n)}function u(n,t){return n+t}function l(n,t){return n*t}function i(n,t,r,e,u,l,i){var f=this;f.key=n,f.val=t,f.prev=r||null,f.next=e||null,f.left=u||null,f.right=l||null,f.data=i||null}function f(n,r,e,u,l,i,f){var o,c,a,s,h,g,p,d,v=r,y=null,m=e&&t(e);if(m&&(null==u&&(u=0),null==l&&(l=e.length-1)),null==i&&(i=u>l?-1:1),0===i||m&&!e.length||0>=A.floor((l-u)/i)+1)return v;if(0>i?(d=(u-l)%-i,d&&(y=l),l+=d,g=l,p=u,s=-1,a=-(-i<<4)):(d=(l-u)%i,d&&(y=l),l-=d,g=u,p=l,s=1,a=i<<4),h=u+i*(15&A.floor((l-u)/i+1)),m){for(g=A.max(0,g),p=A.min(e.length-1,p),o=u;o>=g&&p>=o&&s*(h-o)>0;o+=i)v=n(v,e[o],o);for(c=h;c>=g&&p>=c;c+=a)o=c,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o),o+=i,v=n(v,e[o],o);!0===f&&null!==y&&y>=0&&y<e.length&&(v=n(v,e[y],y))}else{for(o=u;o>=g&&p>=o&&s*(h-o)>0;o+=i)v=n(v,o,o);for(c=h;c>=g&&p>=c;c+=a)o=c,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o),o+=i,v=n(v,o,o);!0===f&&null!==y&&(v=n(v,y,y))}return v}function o(n,r,e){var u=t(n)?n:(n=0|n)>0?new Array(n):[];if(n=u.length,n>0&&null!=r){e=e||0;var l=r;f("function"==typeof r?function(n,t,e){return n[e]=r(e),n}:r===+r?function(n,t,r){return n[r]=l,l+=e,n}:function(n,t,e){return n[e]=r,n},u,u)}return u}function c(n,t,r,e){return f(u,0,n,t,r,e)}function a(n,t,r,e){return f(l,1,n,t,r,e)}function s(n,t,r){return f(function(n,r,e){return n[e]=r[t],n},!0===r?n:new Array(n.length),n)}function h(n,t,r){if(null==t&&(t=0),null==r&&(r=n.length-1),r>t)for(var e,u=t,l=r;l>u;u++,l--)e=n[u],n[u]=n[l],n[l]=e;return n}function g(n,r,e,u,l){var i=0;return f(t(e)?function(n,t,r){return n[r]=e[r]>0?(t+i)%e[r]:0,i+=e[r]-n[r],n}:function(n,t,r){return n[r]=(t+i)%e,i+=e-n[r],n},n,r,u,l)}function p(n,t,r,e,u,l,i){return null==e&&(e=1),null==u&&(u=0),f(2===r?function(n,t,r){return n[r]=u+e*(1&t),n}:function(n,t,l){return n[l]=u+e*(t%r),n},n,t,l,i)}function d(n,t,r,e,u,l){return null==r&&null==e?n:f(function(n,t,u){return n[u]=e+r*t,n},n,t,u,l)}function v(n,t,r,e,u,l){null==r&&(r=1),null==e&&(e=0);var i=0;return f(function(n,t,u){return n[u]=e+r*(t-i),i=t,n},n,t,u,l)}function y(n,t,r,e,u,l){null==r&&(r=1),null==e&&(e=0);var i=0;return f(function(n,t,u){return i+=t,n[u]=e+r*i,n},n,t,u,l)}function m(){var n,r,e,u,l,i,f,o,c,a,s=arguments,h=s.length;if(!h)return[];if(!0===s[0]){for(c=s[1].length,n=2;h>n;n++)c*=s[n].length;for(a=new Array(c),n=0;c>n;n++){for(o=0,i=1,e=n,r=1;h>r;r++)u=s[r].length,l=e%u,e=~~(e/u),f=s[r][l],o+=i*f,i*=u;a[n]=o}}else{for(c=s[0].length,n=1;h>n;n++)c*=s[n].length;for(a=new Array(c),n=0;c>n;n++){for(o=[],e=n,r=h-1;r>=0;r--)if(u=s[r].length,l=e%u,e=~~(e/u),f=s[r][l],t(f))for(i=f.length-1;i>=0;i--)o.unshift(f[i]);else o.unshift(f);a[n]=o}}return a}function E(n,t,r,e,u,l,i,f){e=-1===e?-1:1,null==u&&(u=0),null==l&&(l=t.length-1),null==i&&(i=0),null==f&&(f=r.length-1);var o=u>l?-1:1,c=i>f?-1:1,a=o*(l-u)+1,s=c*(f-i)+1,h=u,g=i,p=0;if(null==n&&(n=new Array(A.min(a,s))),0===n.length)return n;for(;o*(l-h)>=0&&c*(f-g)>=0;)1===e&&t[h]<r[g]||-1===e&&t[h]>r[g]?h+=o:1===e&&t[h]>r[g]||-1===e&&t[h]<r[g]?g+=c:(n[p++]=t[h],h+=o,g+=c);return p<n.length&&(n.length=p),n}function T(n,t,r,e,u,l,i,f){e=-1===e?-1:1,null==u&&(u=0),null==l&&(l=t===+t?t-1:t.length-1),null==i&&(i=0),null==f&&(f=r?r.length-1:-1);var c=u>l?-1:1,a=i>f?-1:1,s=c*(l-u)+1,h=u,g=u,p=0;if(!r||!r.length)return t===+t?o(t,u,c):t?t.slice():t;if(null==n&&(n=new Array(s)),t===+t){for(;c*(l-h)>=0&&a*(f-g)>=0;)h===r[g]?(h+=c,g+=c):1===e&&h>r[g]||-1===e&&h<r[g]?g+=a:(n[p++]=h,h+=c);for(;c*(l-h)>=0;)n[p++]=h,h+=c}else{for(;c*(l-h)>=0&&a*(f-g)>=0;)t[h]===r[g]?(h+=c,g+=c):1===e&&t[h]>r[g]||-1===e&&t[h]<r[g]?g+=a:(n[p++]=t[h],h+=c);for(;c*(l-h)>=0;)n[p++]=t[h],h+=c}return p<n.length&&(n.length=p),n}function O(n,t,r,e,u,l,i,f,o,c,a){e=-1===e?-1:1,null==u&&(u=0),null==l&&(l=t.length-1),null==i&&(i=0),null==f&&(f=r.length-1),!0===o?c=!1:(o=!1,c=!1!==c),a=!0===a;var s=u>l?-1:1,h=i>f?-1:1,g=s*(l-u)+1,p=h*(f-i)+1,d=g+p,v=u,y=i,m=0,E=null,T=!c;if(null==n&&(n=new Array(d)),0===n.length)return a?t:n;for(;s*(l-v)>=0&&h*(f-y)>=0;){if(c&&m){if(t[v]===E){v+=s;continue}if(r[y]===E){y+=h;continue}}o?1===e&&t[v][0]<r[y][0]||-1===e&&t[v][0]>r[y][0]?(n[m++]=E=t[v],v+=s):1===e&&t[v][0]>r[y][0]||-1===e&&t[v][0]<r[y][0]?(n[m++]=E=r[y],y+=h):(1===e&&t[v][1]<r[y][1]||-1===e&&t[v][1]>r[y][1]?(n[m++]=E=t[v],T&&(n[m++]=r[y])):(n[m++]=E=r[y],T&&(n[m++]=t[v])),v+=s,y+=h):1===e&&t[v]<r[y]||-1===e&&t[v]>r[y]?(n[m++]=E=t[v],v+=s):1===e&&t[v]>r[y]||-1===e&&t[v]<r[y]?(n[m++]=E=r[y],y+=h):(n[m++]=E=t[v],T&&(n[m++]=r[y]),v+=s,y+=h)}for(;s*(l-v)>=0;)(T||t[v]!==E)&&(n[m++]=E=t[v],v+=s);for(;h*(f-y)>=0;)(T||r[y]!==E)&&(n[m++]=E=r[y],y+=h);if(a){for(v=u,m=0;d>m;m++,v+=s)t[v]=n[m];return t}return m<n.length&&(n.length=m),n}function R(n,t,r,e,u){null==e&&(e=0),null==u&&(u=n.length-1);var l=e>u?-1:1,i=l*(u-e)+1;if(r=!0===r,1>=i)return r?1===i?[e]:[]:n;t=-1===t?-1:1;var o,c,a=i,h=1,g=2,p=A.min,d=new Array(i);for(r&&(o=e,c=new Array(i),n=f(function(t,r,e){return t[e]=[n[o],o],o+=l,t},c,c),e=0,u=i-1,l=1);a>0;)f(function(u,f){O(d,n,n,t,e+l*f,e+l*(f+h-1),e+l*(f+h),e+l*p(f+g-1,i-1),r,!1,!0)},null,null,0,i-h-1,g),h<<=1,g<<=1,a>>=1;return r?s(n,1,!0):n}function w(n,r,e,u){var l,i=j.rndInt,o=!0===r?1:0;return t(e)?1<(l=e.length)&&f(function(n){if(o<l--){var t=i(0,l-o),r=n[e[l]];n[e[l]]=n[e[t]],n[e[t]]=r}return n},n,e,0,l-1):(null==e&&(e=0),null==u&&(u=n.length-1),1<(l=u-e+1)&&f(function(n){if(o<l--){var t=i(0,l-o),r=n[e+l];n[e+l]=n[e+t],n[e+t]=r}return n},n,n,0,l-1)),n}function x(n,t,r,e,u,l,i){null==l&&(l=0),null==i&&(i=n.length-1);var f,o,c,a,s=j.rndInt,h=i-l+1;if(t=A.min(t,h),r=!0===r,f=new Array(t),!0===e){for(h-=1,o=0;t>o;o++)f[o]=n[l+s(0,h)];return r&&R(f),f}for(o=0;t>o;o++)c=s(0,--h),a=n[l+c],n[l+c]=n[l+h],n[l+h]=a,f[o]=a,u&&(u[o]=c);if(u)for(o=t-1;o>=0;o--)c=u[o],a=n[l+h],n[l+h]=n[l+c],n[l+c]=a,h++;return r&&R(f),f}function N(n,t,r,e,u){r=-1===r?-1:1,null==e&&(e=0),null==u&&(u=t.length-1);var l,i,f=e,o=u;if(n===t[f])return f;if(n===t[o])return o;for(;o>f;){if(l=f+(o-f+1>>>1),i=t[l],n===i)return l;1===r&&i>n||-1===r&&n>i?o=l-1:f=l+1}return-1}function b(){var n,t,r,e,u,l,i,f,o,c,a,s,h,g,p,d=arguments,v=d.length,y="|^",m="|v";if(v){for(i=1,p=[],l=[],s=[],a=[],n=v-1;n>=0;n--)c=d[n],a.unshift("f"+n),c.push?(s.unshift(c[1]),c=c[0]):s.unshift(null),g=c.slice(-2),m===g?(h=!0,c=c.slice(0,-2)):y===g?(h=!1,c=c.slice(0,-2)):h=!1,c=c.length?'["'+c.split(".").join('"]["')+'"]':"",t="a"+c,r="b"+c,s[0]&&(t=a[0]+"("+t+")",r=a[0]+"("+r+")"),e="a_"+n,u="b_"+n,l.unshift(""+e+"="+t+","+u+"="+r),f=h?""+i:"-"+i,o=h?"-"+i:""+i,p.unshift("("+e+" < "+u+" ? "+f+" : ("+e+" > "+u+" ? "+o+" : 0))"),i<<=1;return new Function(a.join(","),["return function(a,b) {","  var "+l.join(",")+";","  return "+p.join("+")+";","};"].join("\n")).apply(null,s)}return t="a",r="b",f="-1",o="1",p=""+t+" < "+r+" ? "+f+" : ("+t+" > "+r+" ? "+o+" : 0)",new Function("a,b","return "+p+";")}var j,A=Math,I=(Object[PROTO].hasOwnProperty,Object[PROTO].toString);return i.NODE=1,i.PREV=2,i.NEXT=4,i.LEFT=8,i.RIGHT=16,i.walk=function P(n,t,r){t&&(i.NODE===n[0]?r(t):i.PREV===n[0]&&t.prev?P(n,t.prev,r):i.LEFT===n[0]&&t.left?P(n,t.left,r):i.RIGHT===n[0]&&t.right?P(n,t.right,r):i.NEXT===n[0]&&t.next&&P(n,t.next,r),i.NODE===n[1]?r(t):i.PREV===n[1]&&t.prev?P(n,t.prev,r):i.LEFT===n[1]&&t.left?P(n,t.left,r):i.RIGHT===n[1]&&t.right?P(n,t.right,r):i.NEXT===n[1]&&t.next&&P(n,t.next,r),i.NODE===n[2]?r(t):i.PREV===n[2]&&t.prev?P(n,t.prev,r):i.LEFT===n[2]&&t.left?P(n,t.left,r):i.RIGHT===n[2]&&t.right?P(n,t.right,r):i.NEXT===n[2]&&t.next&&P(n,t.next,r),i.NODE===n[3]?r(t):i.PREV===n[3]&&t.prev?P(n,t.prev,r):i.LEFT===n[3]&&t.left?P(n,t.left,r):i.RIGHT===n[3]&&t.right?P(n,t.right,r):i.NEXT===n[3]&&t.next&&P(n,t.next,r),i.NODE===n[4]?r(t):i.PREV===n[4]&&t.prev?P(n,t.prev,r):i.LEFT===n[4]&&t.left?P(n,t.left,r):i.RIGHT===n[4]&&t.right?P(n,t.right,r):i.NEXT===n[4]&&t.next&&P(n,t.next,r))},j={VERSION:"1.0.0",is_string:r,is_array:t,array:o,operate:f,sum:c,product:a,gray:g,affine:d,modulo:p,finitedifference:v,partialsum:y,reverse:h,kronecker:m,intersection:E,difference:T,union:O,search:N,sort:R,sorter:b,shuffle:w,pick:x,pluck:s,rndInt:e,Node:i}});